#!/usr/bin/env ruby

require 'import_js'
require 'slop'

opts = Slop.parse do |o|
  o.string '-w', '--word', 'a word/variable to import'
end

file_contents = STDIN.read.split("\n")

editor = ImportJS::CommandLineEditor.new(file_contents, opts)
importer = ImportJS::Importer.new(editor)
if opts[:word]
  importer.import
else
  importer.import_all
end

# Print resulting file to stdout
puts editor.current_file_content

# Print messages to stderr
STDERR.puts editor.messages

